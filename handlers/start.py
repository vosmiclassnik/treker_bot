from telebot.types import Message
import telegram.constants
from utils.logger import setup_logger
from utils.achievements import nachalo
logger = setup_logger()
def register_handlers(bot, users, rassilka, achieve, goals):
    @bot.message_handler(commands=['start'])
    def start(mess: Message):
        nachalo(mess, achieve)
        logger.info(f'/start –≤—ã–∑–≤–∞–Ω–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {mess.chat.id}')
        text = (
            "–ü—Ä–∏–≤–µ—Ç! üëã –Ø ‚Äî —Ç–≤–æ–π —É—á–µ–±–Ω—ã–π –±–æ—Ç-—Ç—Ä–µ–∫–µ—Ä. –ü–æ–º–æ–≥–∞—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—ã –ø–æ—Å–≤—è—â–∞–µ—à—å —É—á—ë–±–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å üìöüí™\n\n"
            "–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ —á–∞—Å—ã, –ø—Ä–æ—Å—Ç–æ –≤–≤–µ–¥–∏ –∫–æ–º–∞–Ω–¥—É:\n"
            "<code>/add n –∫–∞—Ç–µ–≥–æ—Ä–∏—è</code>\n"
            "–≥–¥–µ <b>n</b> ‚Äî —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤, –∞ <b>–∫–∞—Ç–µ–≥–æ—Ä–∏—è</b> ‚Äî –ø—Ä–µ–¥–º–µ—Ç –∏–ª–∏ —Ç–∏–ø –∑–∞–Ω—è—Ç–∏—è.\n"
            "–ù–∞–ø—Ä–∏–º–µ—Ä: <code>/add 2 –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞</code>\n\n"
                        "–í–æ—Ç —á—Ç–æ —è —É–º–µ—é:\n"
            "‚ûï <code>/add n –∫–∞—Ç–µ–≥–æ—Ä–∏—è</code> ‚Äî –î–æ–±–∞–≤–∏—Ç—å —á–∞—Å—ã\n"
            "üìä <code>/stats –∫–∞—Ç–µ–≥–æ—Ä–∏—è</code> ‚Äî –ì—Ä–∞—Ñ–∏–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n"
            "üéØ <code>/goal –∫–∞—Ç–µ–≥–æ—Ä–∏—è —á–∞—Å—ã –¥–∞—Ç–∞</code> ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: <code>/goal –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 20 01-06-2025</code>)\n"
            "‚è∞ <code>/setremind –ß–ß:–ú–ú</code> ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ\n"
            "üë§ /profile ‚Äî –¢–≤–æ–π –ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å\n"
            "üö´ /unsetremind ‚Äî –£–¥–∞–ª–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è\n"
            'üèÜ/achieve - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π\n'
            "‚ÑπÔ∏è /help ‚Äî –ü–æ–º–æ—â—å\n\n"
            "–£—Å–ø–µ—Ö–æ–≤ –≤ —É—á—ë–±–µ! üåü"
        )

        bot.send_message(mess.chat.id, text, parse_mode=telegram.constants.ParseMode.HTML)

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
        achieve.test_otput()




    @bot.message_handler(commands=['help'])
    def help_command(mess: Message):
        logger.info(f'/help –≤—ã–∑–≤–∞–Ω–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {mess.chat.id}')
        help_text = (
            "‚ÑπÔ∏è –í–æ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:\n\n"
            "‚ûï <b>/add</b> n –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî –î–æ–±–∞–≤–∏—Ç—å —á–∞—Å—ã —É—á—ë–±—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: <code>/add 2 —Ñ–∏–∑–∏–∫–∞</code>)\n"
            "üìä <b>/stats</b> –∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n"
            "üë§ <b>/profile</b> ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å–æ –≤—Å–µ–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏\n"
            "‚è∞ <b>/setremind</b> –ß–ß:–ú–ú ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ\n"
            "üéØ <b>/goal –∫–∞—Ç–µ–≥–æ—Ä–∏—è —á–∞—Å—ã –¥–∞—Ç–∞</b> ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: <code>/goal –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 20 01-06-2025</code>)\n"
            "üö´ <b>/unsetremind</b> ‚Äî –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è\n"
            "üèÜ <b>/achieve</b> ‚Äî –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è!\n\n"
            "–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –µ—â—ë —Ä–∞–∑ /help üôÇ"
        )
        bot.send_message(mess.chat.id, help_text, parse_mode=telegram.constants.ParseMode.HTML)